---
import { Image } from "astro:assets";
import type { Product } from "../consts/products";

export interface Props {
  product: Product;
  variant?: "simple" | "detailed";
}

const { product, variant = "detailed" } = Astro.props;

// Import all product images
import naturalImage from "../assets/images/products/frasco-380-natural-fondo-blanco.webp";
import chocolateImage from "../assets/images/products/frasco-380-chocolate-fondo-blanco.webp";
import cookiesImage from "../assets/images/products/frasco-380-cookies-fondo-blanco.webp";
import cocoImage from "../assets/images/products/frasco-380-coco.webp";
import mielLiquidaImage from "../assets/images/products/frasco-380-miel-liquida-fondo-blanco.webp";
import mielSolidaImage from "../assets/images/products/frasco-380-miel-solida-fondo-blanco.webp";

// Create a mapping object
const imageMap = {
  "/src/assets/images/products/frasco-380-natural-fondo-blanco.webp":
    naturalImage,
  "/src/assets/images/products/frasco-380-chocolate-fondo-blanco.webp":
    chocolateImage,
  "/src/assets/images/products/frasco-380-cookies-fondo-blanco.webp":
    cookiesImage,
  "/src/assets/images/products/frasco-380-coco.webp": cocoImage,
  "/src/assets/images/products/frasco-380-miel-liquida-fondo-blanco.webp":
    mielLiquidaImage,
  "/src/assets/images/products/frasco-380-miel-solida-fondo-blanco.webp":
    mielSolidaImage,
};

const productImage = imageMap[
  product.image as keyof typeof imageMap
] as ImageMetadata;
---

<div
  class="card group bg-white rounded-2xl p-6 ring-1 ring-neutral-200 hover:ring-neutral-300 transition-all duration-300 transform hover:scale-[1.02]"
>
  <!-- Product Image -->
  <div
    class="aspect-square bg-white rounded-xl mb-6 flex items-center justify-center overflow-hidden"
  >
    <Image
      src={productImage}
      alt={product.name}
      class="w-full h-full object-contain p-4"
    />
  </div>

  <!-- Product Info -->
  <div class="space-y-4">
    <div>
      <h3 class="text-2xl font-bold text-black mb-2">{product.name}</h3>
      <p class="text-neutral-700 text-sm leading-relaxed">
        {product.description}
      </p>
    </div>

    {
      variant === "detailed" && (
        <>
          <div class="flex flex-wrap gap-2">
            {product.benefits.map((benefit) => (
              <span class="bg-primary-500/10 text-primary-400 px-3 py-1 rounded-full text-xs font-medium">
                {benefit}
              </span>
            ))}
          </div>

          <div class="bg-neutral-100 rounded-lg p-4 space-y-2">
            <h4 class="font-semibold text-neutral-900 text-sm">
              Por porción de 2 cdas:
            </h4>
            <div class="grid grid-cols-2 gap-2 text-xs">
              <div class="text-neutral-700">
                Calorías:{" "}
                <span class="text-neutral-900 font-medium">
                  {product.nutrition.calories}
                </span>
              </div>
              <div class="text-neutral-700">
                Proteína:{" "}
                <span class="text-neutral-900 font-medium">
                  {product.nutrition.protein}g
                </span>
              </div>
              <div class="text-neutral-700">
                Grasas:{" "}
                <span class="text-neutral-900 font-medium">
                  {product.nutrition.fat}g
                </span>
              </div>
              <div class="text-neutral-700">
                Carbohidratos:{" "}
                <span class="text-neutral-900 font-medium">
                  {product.nutrition.carbs}g
                </span>
              </div>
            </div>
          </div>
        </>
      )
    }

    <!-- CTA -->
    <div class="flex justify-center items-center pt-2">
      <button
        class="w-full bg-primary hover:bg-primary-600 text-white px-8 py-2 rounded-full font-medium transition-colors group-hover:shadow-lg shadow-md"
      >
        Ver más
      </button>
    </div>
  </div>
</div>
