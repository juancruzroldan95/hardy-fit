---
import { Image } from "astro:assets";
import heroBgImage from "../assets/images/red-bg-image.webp";
import ArrowDown from "../icons/ArrowDown.astro";
---

<!-- Background image -->
<div class="absolute inset-0 bg-primary">
  <Image
    src={heroBgImage}
    alt="Hardy hero background"
    class="w-full h-full object-contain opacity-80"
    loading="eager"
    quality={90}
  />
  <!-- Radial gradient overlay to blend edges -->
  <div
    class="absolute inset-0 bg-gradient-radial from-transparent via-transparent to-primary"
    style="background: radial-gradient(ellipse at center, transparent 0%, transparent 40%, rgba(195, 33, 54, 0.3) 70%, rgba(195, 33, 54, 1) 100%);"
  >
  </div>
</div>

<!-- Content -->
<div
  class="relative z-10 max-w-7xl mx-auto px-6 lg:px-8 text-center scrolling-section opacity-0"
>
  <div class="space-y-8">
    <div class="space-y-4">
      <p
        class="hero-text text-xl md:text-2xl text-secondary uppercase tracking-widest font-header font-extrabold max-w-3xl mx-auto leading-relaxed opacity-0"
      >
        Alimentá tu instinto
      </p>
      <h1
        class="hero-text text-5xl md:text-7xl font-header font-extrabold text-white uppercase leading-tight opacity-0"
      >
        Go Hardy or Go Home
      </h1>
      <p
        class="hero-text typewriter-text text-xl md:text-2xl text-white/90 max-w-3xl mx-auto leading-relaxed opacity-0"
        data-text="Hardy es impulso, empuje, movimiento hacia la conquista de nosotros mismos. Es ir siempre hacia adelante, reconociendo nuestros miedos y limitaciones para conquistarlos a ellos también."
      >
      </p>
    </div>

    <div
      class="hero-buttons flex flex-col sm:flex-row gap-6 justify-center items-center opacity-0"
    >
      <a
        href="/productos"
        class="bg-secondary px-8 py-4 rounded-full text-black font-semibold uppercase text-lg transition-all duration-300 hover:scale-105 hover:shadow-lg active:scale-95 inline-block"
      >
        Ver Productos
      </a>
      <a
        href="https://www.hardymarket.com.ar/"
        target="_blank"
        rel="noopener noreferrer"
        class="bg-accent px-8 py-4 rounded-full text-white uppercase font-semibold text-lg transition-all duration-300 hover:scale-105 hover:shadow-lg active:scale-95 inline-block"
      >
        Tienda Hardy
      </a>
    </div>
  </div>
</div>

<!-- Scroll indicator -->
<div
  class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce"
>
  <ArrowDown class="w-6 h-6 text-white" />
</div>

<script>
  class Typewriter {
    private element: HTMLElement;
    private text: string;
    private speed: number;
    private currentIndex: number = 0;

    constructor(element: HTMLElement, speed: number = 30) {
      this.element = element;
      this.text = element.getAttribute("data-text") || "";
      this.speed = speed;
    }

    async start() {
      // Wait for the element to fade in first
      await new Promise((resolve) => setTimeout(resolve, 1200));

      return new Promise<void>((resolve) => {
        const type = () => {
          if (this.currentIndex < this.text.length) {
            this.element.textContent =
              this.text.substring(0, this.currentIndex + 1) + "|";
            this.currentIndex++;
            setTimeout(type, this.speed);
          } else {
            // Remove cursor at the end
            this.element.textContent = this.text;
            resolve();
          }
        };
        type();
      });
    }
  }

  // Initialize typewriter on page load
  document.addEventListener("DOMContentLoaded", () => {
    const typewriterElement = document.querySelector(
      ".typewriter-text",
    ) as HTMLElement;
    if (typewriterElement) {
      const typewriter = new Typewriter(typewriterElement, 30);
      typewriter.start();
    }
  });
</script>
